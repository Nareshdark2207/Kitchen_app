{"version":3,"sources":["../../src/pages/email-otp/email-otp.module.ts","../../src/pages/email-otp/email-otp.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EmailOtpPage } from './email-otp';\n\n@NgModule({\n  declarations: [\n    EmailOtpPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EmailOtpPage),\n  ],\n})\nexport class EmailOtpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email-otp/email-otp.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController,Platform } from 'ionic-angular';\nimport { FormControl, FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Service } from '../../app/service';\ndeclare var SMSRetriever: any;\n// declare var SMSReceive: any;\n/**\n * Generated class for the EmailOtpPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-email-otp',\n  templateUrl: 'email-otp.html',\n})\nexport class EmailOtpPage {\n  verifyForm: FormGroup;\n  verifyUrl: string = 'user_mail';\n  data: any;\n  OTP: string = '';\n  OTPmessage: string ;\n  language_field_url: string = 'language_settings_field';\n  languagefield: any = {};\n  lang_code: any;\n  // VALIDATION MESSAGES\n  // ===============================\n  validation_messages = {\n    'otp': [\n      { type: 'max', message: 'Maximium 6 Letters Only Allowed' },\n      { type: 'min', message: 'Maximium 6 Letters Only Allowed' }\n    ]\n  }\n  // ==========================================================================================================================\n  constructor(public navCtrl: NavController, public navParams: NavParams, private formBuilder: FormBuilder, private api_service: Service, public viewCtrl: ViewController, private platform: Platform ) {\n    this.data = this.navParams.data.data;\n    this.verifyForm = this.formBuilder.group({\n      otp: new FormControl(null, [Validators.required, Validators.max(999999), Validators.min(100000)]),\n    });\n    if (localStorage.getItem('lang_code')) {\n      let value = localStorage.getItem('lang_code');\n      this.lang_code = value;\n    }\n  }\n\n// ==============================================================================================================================\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad EmailOtpPage');\n    this.language_field();\n    if(this.platform.is('android')){\n    // this.start();\n    }\n  }\n  start() {\n    let otp_message = \"OTP Will Be Recieved Within 5 minutes\"\n    this.api_service.create(otp_message, 'top', 'success');\n    SMSRetriever.startWatch((result)=>{\n      console.info(result);\n      document.addEventListener('onSMSArrive', (args:any)=> {\n        // SMS arrived, get its contents\n        console.info(args.message);\n        if(args){\n          var IncomingSMS = args;\n          this.processSMS(IncomingSMS);\n        }\n        // To Do: Extract the received one-time code and verify it on your server\n    });\n    },(error)=>{\n      this.api_service.create(error, 'bottom', 'success');\n\n    });\n\n  }\n\nprocessSMS(data) {\n  // Check SMS for a specific string sequence to identify it is you SMS\n  // Design your SMS in a way so you can identify the OTP quickly i.e. first 6 letters\n  // In this case, I am keeping the first 6 letters as OTP\n    const message = data.message;\n    if (message != ''){\n    let matches = message.match(/(\\d+)/);             \n    if (matches) { \n      this.OTP  = matches[0]; \n      this.verifyForm.get('otp').patchValue(this.OTP);\n      this.otp_verify();\n    } \n    // this.stop();\n  }\n}\n  mobile_verify()\n  {\n    this.navCtrl.pop();\n  }\n  // ===============================================================================================================================\n  // OTP VERIFICATION\n  // =================================\n  otp_verify = () => {\n    if (this.verifyForm.valid) {\n    this.data.otp = this.verifyForm.value.otp;\n      this.api_service.post_data(this.verifyUrl, this.data)\n        .subscribe((result) => {\n          if (result.status == 'Success') {\n            this.api_service.stopLoader();\n            this.api_service.create(result.message, 'top', 'success');\n            this.navCtrl.setRoot('MyAccountPage');\n          } else {\n            this.api_service.stopLoader();\n            this.api_service.create(result.message, 'top', 'error');\n          }\n        }, (error) => {\n          this.api_service.stopLoader();\n          this.api_service.create(error, 'top', 'error');\n  \n          console.log(error)\n        })\n    }\n  }\n  // ======================================================================================================================================\n  language_field() {\n\n    this.api_service.get_list(this.language_field_url + '?api_token=' + this.api_service.api_token + '&lang_code='+this.lang_code).subscribe((result: any) => {\n        this.api_service.stopLoader();\n        if (result.status == 'success') {\n          this.api_service.stopLoader();\n          this.languagefield = result.field_list;\n        }\n        else {\n          this.api_service.stopLoader();\n          this.api_service.create(result.message, 'top', 'error');\n        }\n      },\n        (error) => {\n          this.api_service.stopLoader();\n          this.api_service.create(error, 'top', 'error');\n        });\n  }\n\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email-otp/email-otp.ts"],"sourceRoot":""}