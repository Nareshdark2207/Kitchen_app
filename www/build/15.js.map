{"version":3,"sources":["../../src/pages/payment/payment.module.ts","../../src/pages/payment/payment.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PaymentPage } from './payment';\n\n@NgModule({\n  declarations: [\n    PaymentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PaymentPage),\n  ],\n})\nexport class PaymentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment/payment.module.ts","import { Component } from '@angular/core';\nimport { FormGroup, Validators, FormBuilder, FormControl } from '@angular/forms'\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Service } from '../../app/service';\n@IonicPage()\n@Component({\n  selector: 'page-payment',\n  templateUrl: 'payment.html',\n})\nexport class PaymentPage {\n  orderId: any;\n  value: any;\n  id: any;\n  type: any;\n  paymentForm: FormGroup;\n  api_token: any;\n  data: any;\n  customer_id: any;\n  payment_url: string = 'post_payment';\n  order_id: any;\n  total: any;\n  due_amount: any;\n  paid_amount: any;\n  error_mesg:any;\n  language_field_url: string = 'language_settings_field';\n  languagefield: any = {};\n  code: any;\n\n  /// ===================================================================================================================================\n  // VALIDATION MESSAGES\n  // =====================\n  validation_messages = {\n    'amount': [\n      { type: 'required', message: 'Amount is Required' }\n    ],\n    'reference_number': [\n      { type: 'required', message: 'Reference number time is Required' }\n    ],\n    'description': [\n      { type: 'required', message: 'Description is Required' }\n    ]\n\n  };\n  // ========================================================================================================================================\n  constructor(public navCtrl: NavController, public navParams: NavParams, public Fb: FormBuilder, public api_service: Service) {\n    let value_item = JSON.parse(localStorage.getItem('eastern_deals'));\n    this.customer_id = value_item.id;\n    this.value = this.navParams.get('order_details');\n    this.id = this.value.id;\n    this.type = this.value.types;\n    this.order_id = this.value.Order_id;\n    this.total = this.value.total;\n    this.due_amount = this.value.due_amt;\n    this.paid_amount = (this.total) - (this.due_amount);\n    this.FormInit();\n    if (localStorage.getItem('lang_code')) {\n      let value = localStorage.getItem('lang_code');\n      this.code = value;\n      console.log(this.code);\n    }\n  }\n  ionViewDidLoad() {\n  }\n  ngOnInit() {\n     this.language_field();\n  }\n  // ==============================================================================================================================\n  // FORM INITIATE\n  // =======================\n  FormInit = () => {\n    this.paymentForm = this.Fb.group({\n      amount: new FormControl(null, Validators.required),\n      reference_number: new FormControl(null, Validators.required),\n      description: new FormControl(null, Validators.required),\n    })\n  }\n  // =======================================================================================================================================\n  // PAYMENT SUBMIT\n  // ==============================\n  payment_submit() {\n  if (this.paymentForm.valid) {\n    this.data = {};\n    this.api_token = this.api_service.api_token;\n    this.data = this.paymentForm.value\n    this.data.api_token = this.api_token;\n    this.data.user_id = this.customer_id;\n    this.data.id = this.id;\n    this.data.type = this.type;\n    if(this.paymentForm.value.amount <= this.total){\n    this.api_service.post_data(this.payment_url, this.data)\n      .subscribe((result: any) => {\n        let res = result.status\n        if (res == \"success\") {\n          this.api_service.stopLoader();\n          if (this.data.type == 'post' || this.data.type == 'ad_request' || this.data.type == 'home_post')\n          {\n            this.navCtrl.setRoot('MyOrdersPage');\n\n          }\n          else{\n            this.navCtrl.setRoot('RenewalPage');\n          }\n         }\n        else {\n          this.api_service.stopLoader();\n          this.error_mesg = result.errors.reference_number[0];\n          // this.error_mesg = result.status;\n          console.log(this.error_mesg);\n          \n        }\n      },(error) => {\n        this.api_service.stopLoader();\n        this.api_service.create(error, 'top', 'error');\n\n        console.log(error)\n      });\n    }\n    else{\n      this.api_service.create(\"Price Amount Should Not Be Greater Than Total Price\", 'top', 'error');\n\n    }\n    } else {\n      this.validateAllFormFields(this.paymentForm);\n    }\n  }\n  // ==============================================================================================================================================\n  // VALIDATION METHOD\n  // =============================\n  validateAllFormFields(paymentForm: FormGroup) {\n    Object.keys(paymentForm.controls).forEach(field => {\n      const control = paymentForm.get(field);\n      if (control instanceof FormControl) {\n        control.markAsTouched({ onlySelf: true });\n      } else if (control instanceof FormGroup) {\n        this.validateAllFormFields(control);\n      }\n    });\n  }\n  // ==================================================================================================================================\n  language_field() {\n    this.api_service.get_list(this.language_field_url + '?api_token=' + this.api_service.api_token + '&lang_code='+this.code).subscribe((result: any) => {\n        this.api_service.stopLoader();\n        if (result.status == 'success') {\n          this.languagefield = result.field_list;\n        }\n        else {\n          this.api_service.create(result.message, 'top', 'error');\n        }\n      },\n        (error) => {\n          this.api_service.create(error, 'top', 'error');\n        });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/payment/payment.ts"],"sourceRoot":""}